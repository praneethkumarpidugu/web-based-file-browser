// Generated by CoffeeScript 1.6.3
(function() {
  var stackval;

  stackval = require('stackval');

  module.exports = function() {
    var sv, x;
    sv = stackval();
    x = function(value) {
      return sv.get().push(value);
    };
    x.attach = function(f) {
      return function() {
        var collected, f2;
        collected = [];
        f2 = sv.attach(f, function() {
          return collected;
        });
        return collected.concat([f2.apply(this, arguments)]);
      };
    };
    x.run = function(f) {
      return x.attach(f)();
    };
    x.defined = function() {
      return sv.defined();
    };
    x.collect = x;
    return x;
  };

}).call(this);
